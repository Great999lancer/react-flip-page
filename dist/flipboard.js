!function(t){function e(o){if(i[o])return i[o].exports;var a=i[o]={exports:{},id:o,loaded:!1};return t[o].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),n=i(1),p=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return Object.assign.apply(Object,[{}].concat(e))},c=function(t){function e(t){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.state={page:0,startY:-1,diff:0,timestamp:0,angle:0,rotate:0,direction:"",lastDirection:"",bottomStyle:{},topStyle:{}},i.startMoving=i.startMoving.bind(i),i.moveGesture=i.moveGesture.bind(i),i.stopMoving=i.stopMoving.bind(i),i}return s(e,t),r(e,[{key:"isLastPage",value:function(){return this.state.page+1===n.Children.count(this.props.children)}},{key:"isFirstPage",value:function(){return 0===this.state.page}},{key:"getHeight",value:function(){return this.props.height+"px"}},{key:"getHalfHeight",value:function(){return this.props.height/2+"px"}},{key:"getWidth",value:function(){return this.props.width+"px"}},{key:"startMoving",value:function(t){t.preventDefault();var e=t.pageY||t.touches[0].pageY;this.setState({startY:e})}},{key:"moveGesture",value:function(t){t.preventDefault();var e=t.pageY||t.touches[0].pageY;if(this.state.startY!==-1){var i=e-this.state.startY,o=i/250*180,a=!1;"up"===this.state.direction?a=this.isLastPage():"down"===this.state.direction&&(a=this.isFirstPage());var s=Math.min(Math.abs(o),a?this.props.maxAngle:180);if(""===this.state.direction&&Math.abs(i)>this.props.treshold){var r="";i<0?r="up":i>0&&(r="down"),this.setState({direction:r})}var n=this.state.lastDirection;this.state.diff>i?n="up":this.state.diff<i&&(n="down"),this.setState({angle:o,rotate:s,timestamp:Date.now(),diff:i,lastDirection:n}),i<0&&"up"===this.state.direction?this.setState({angle:o,bottomStyle:{transform:"perspective("+this.props.perspective+") rotateX("+s+"deg)"}}):i>0&&"down"===this.state.direction&&this.setState({angle:o,topStyle:{transform:"perspective("+this.props.perspective+") rotateX(-"+s+"deg)",zIndex:2}})}}},{key:"stopMoving",value:function(t){var e=this,i=Date.now()-this.state.timestamp,o=!this.isLastPage()&&(this.state.angle<=-90||i<=20&&"up"===this.state.direction&&"up"===this.state.lastDirection),a=!this.isFirstPage()&&(this.state.angle>=90||i<=20&&"down"===this.state.direction&&"down"===this.state.lastDirection);this.setState({startY:-1,direction:"",angle:0,bottomStyle:{transition:"transform "+this.props.animationDuration/1e3+"s ease-in-out",transform:o?"perspective("+this.props.perspective+") rotateX(180deg)":""},topStyle:{transition:"transform "+this.props.animationDuration/1e3+"s ease-in-out",transform:a?"perspective("+this.props.perspective+") rotateX(-180deg)":"",zIndex:a?2:"auto"}},function(){o?setTimeout(function(){e.setState({bottomStyle:{},page:e.state.page+1})},e.props.animationDuration):a&&setTimeout(function(){e.setState({topStyle:{},page:e.state.page-1})},e.props.animationDuration)})}},{key:"renderPage",value:function(t,e){var i=this.getHeight(),o=this.getHalfHeight(),a=this.getWidth(),s="0 -100px 100px -100px rgba(0,0,0,0.25) inset",r="0 100px 100px -100px rgba(0,0,0,0.25) inset",c=(0,n.cloneElement)(t,{style:Object.assign({},t.props.style,{height:i})}),l={container:{display:this.state.page===e?"block":"none",height:i,overflow:"hidden",position:"relative",width:a},part:{height:o,left:0,position:"absolute",width:a},visiblePart:{transformStyle:"preserve-3d"},top:{top:0,transformOrigin:"bottom center"},bottom:{bottom:0,transformOrigin:"top center"},face:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",height:o,left:0,position:"absolute",top:0,transformStyle:"preserve-3d",width:a},back:{transform:"rotateX(180deg)"},before:{top:0},after:{bottom:0},cut:{background:this.props.pageBackground,height:o,overflow:"hidden",position:"relative",width:a},pull:{marginTop:"-"+o},gradient:{position:"absolute",left:0,right:0,bottom:0,top:0,transition:"box-shadow "+this.props.animationDuration/1e3+"s ease-in-out"},gradientBottomFace:{boxShadow:"up"===this.state.direction?r:""},gradientTopFace:{boxShadow:"down"===this.state.direction?s:""},gradientBottomBack:{boxShadow:"up"===this.state.direction?s:""},gradientTopBack:{boxShadow:"down"===this.state.direction?r:""},mask:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"#000",opacity:""!==this.state.direction?Math.max(this.props.maskOpacity-Math.abs(this.state.rotate)/90*this.props.maskOpacity,0):0}},h=this.isFirstPage()?this.props.firstComponent:this.props.children[this.state.page-1],u=this.isLastPage()?this.props.lastComponent:this.props.children[this.state.page+1],d=l.container,g=l.part,m=l.visiblePart,f=l.top,v=l.bottom,y=l.face,b=l.back,k=l.before,w=l.after,E=l.cut,x=l.pull,P=l.gradient,S=l.gradientBottomBack,R=l.gradientTopBack,T=l.gradientBottomFace,M=l.gradientTopFace,O=l.mask;return React.createElement("div",{key:e,onMouseDown:this.startMoving,onTouchStart:this.startMoving,onMouseMove:this.moveGesture,onTouchMove:this.moveGesture,onMouseUp:this.stopMoving,onTouchEnd:this.stopMoving,style:d},React.createElement("div",{style:p(g,k,E)},h,React.createElement("div",{style:O})),React.createElement("div",{style:p(g,w,E)},React.createElement("div",{style:x},u),React.createElement("div",{style:O})),React.createElement("div",{style:p(g,m,f,this.state.topStyle)},React.createElement("div",{style:y},React.createElement("div",{style:E},c),React.createElement("div",{style:p(P,M)})),React.createElement("div",{style:p(y,b)},React.createElement("div",{style:E},React.createElement("div",{style:x},h)),React.createElement("div",{style:p(P,R)}))),React.createElement("div",{style:p(g,m,v,this.state.bottomStyle)},React.createElement("div",{style:y},React.createElement("div",{style:E},React.createElement("div",{style:x},c)),React.createElement("div",{style:p(P,T)})),React.createElement("div",{style:p(y,b)},React.createElement("div",{style:p(g,w,E)},u),React.createElement("div",{style:p(P,S)}))))}},{key:"render",value:function(){var t=this,e=p(this.props.style,{height:this.getHeight(),position:"relative",width:this.getWidth()});return React.createElement("div",{style:e},n.Children.map(this.props.children,function(e,i){return t.renderPage(e,i)}))}}]),e}(n.Component);c.defaultProps={animationDuration:200,treshold:10,maxAngle:45,maskOpacity:.4,perspective:"130em",pageBackground:"#fff",firstComponent:"",lastComponent:"",style:{}},c.propTypes={animationDuration:n.PropTypes.number,treshold:n.PropTypes.number,maxAngle:n.PropTypes.number,maskOpacity:n.PropTypes.number,perspective:n.PropTypes.string,pageBackground:n.PropTypes.string,firstComponent:n.PropTypes.element,lastComponent:n.PropTypes.element,style:n.PropTypes.object},e.default=c},function(t,e){t.exports=React}]);